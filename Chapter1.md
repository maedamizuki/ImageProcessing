# 画像処理の基礎知識  
画像解析では、色情報が重要な特徴となることが多い。  
色情報や画像のファイルフォーマットについて言及する。  
実際の研究ではこれらが基本となり、どのように処理を行うかを考える必要がある。  

## 画像解析に必要な処理  
| 画像の前処理 | 画像処理  |
| ----------- | ---------    |  
| 後の分析  | 画像解析  |      

1. 画像の前処理：画像のコントラスト修正、ノイズ除去  
2. 画像の特徴量解析：画像の対象の形状や模様の数値化  
3. 特徴量の判別：2で得られた特徴量に対して解析、機械学習を行い、対象の判別分析を行う。  

## 色の表現方法  
* ３原色  
可視光は、波長が380~810nmの電磁波であり、赤緑青の３色に対応する波長の混ざった電磁波となっている。  

* 加法混色と減法混色  
  * 混色系  
    * 加法混色：RGB(モニタ)   
    * 減法混色：CMY(プリンタ)  
  * 顕色系  

* 色温度  
黒体の絶対温度を基準として色を温度で表したもの  

| 色温度 | 色 |  
| --------- | ---------- |   
| 低い | 黄色 |  
| 高い  | 青い  |  

## 表色系  
* RGB表色系  
  *  CIE-RGB表色系  

| 色 | 波長(nm) |  
| --------- | -------- |  
|  赤 | 700  |  
|緑   | 546.1  |  
| 青   | 435.8  |  

* YIQ表色系  
カラーテレビに採用された表色系のこと。  
RGBとYIQとの対応式。  
``` math  
(1.1)式
```  
* HSI表色系  
  * 色相(hue)：H  
  * 彩度(saturation)：S  
  * 明度(intensity)：I  
**HSI変換** ： RGB空間からHSI空間への変換のこと。  
  * 変換方法  
  1. ６角錐モデル  
  RGB表色系の画像をHSI表色系に変換すること。
       ```math  
       図１.1  
       ```  
  2. 双６角錐モデル  
  RGB表色系の画像をHSI表色系に変換すること。
       ```math  
       図１.2    
       ```  
  3. HYZ表色系  
* XYZ表色系  
RGB表色系を1次変換で負の値が出ないように修正したもの。  

* CIE-Lab表色系  

* CMY表色系  
インクジェットカラープリンタで用いられる表色系。  
```math
C=255-R  
M=255-G  
Y=255-B  
```

* CMYK表色系  
CMYにK(黒)を加えた表色である。  
```math
C=255-R  
M=255-G  
Y=255-B  
K=min(C,M,Y)  
```

* YCbCr表色系  
テレビや画像圧縮で用いられる表色系。Y(輝度)、Cb(青色差)、Cr(赤色差)を成分としている。  

## 画像の描画方式  
* ラスタスキャン方式  
液晶テレビやパソコン用液晶ディスプレイに採用されている描画方式のこと。１画面全部を描画する。画像全体の中の小さな部分を書き換える場合でも、画像全体を書き換える必要がある。 　
フレームレート：このラスタスキャン方式で更新する速度のこと。  
  * インターレース方式　　
  * プログレッシブ方式  

* インターレース方式  
リフレッシュレート：１秒間あたりの画像の切り替え回数  
リフレッシュレートが高い=フレームレートが高いほど、滑らかな動画再生を行うことができる。つまり、これは、映像データの伝送レートが増加するということ。  
伝送レートを一定にして、リフレッシュレートをあげる方法をインターレース方式と呼ぶ。1フレーム分を静止画とみなし、2枚の画像で１フレーム構成する方式のことである。  
* プログレッシブ方式  
１フレームをそのままの映像として伝送する方式のこと。所定のリフレッシュレートで１フレームの映像を伝送するので、リフレッシュレートが60Hzの場合は、1秒で60枚のフレームを伝送する。インターレース方式の２倍の伝送レートが必要になる。    

## 画像ファイルの基本要素  
* 圧縮形式  
1. 圧縮と非圧縮  
BMPフォーマット：小さなプログラムで実現可能な非圧縮形式。  
GIF形式、PNG形式：元の画像に完全に戻る圧縮形式で可逆圧縮。一般的なファイルと圧縮率は変わらない。  
JPEG形式：少々画質が落ちても良いから圧縮率を高めたいという要望で考案された形式。  
2. 色の表現  
  * TrueColor：RGBなどの組み合わせで絶対的に色を表現。  
  * インデックスカラー：16色、256色などの色テーブルを定義しておいて相対的に色を表現する方法。  

* ファイルフォーマット  
1. 非圧縮BMP：古いファイル形式。非圧縮のためデータ容量が大きくなる。  
2. PNG：圧縮による画像の劣化のない可逆圧縮。透明もサポートされているので、GUIの部品を作るのに適している。  
3. JPEG：ほとんどのデジタルカメラが採用しているファイル形式で、非圧縮、可逆圧縮や透過度は適用されない。  

* 画像フォーマットの課題  

## 画像の解像度と階調数  
* 解像度の階調数  
**量子化**：アナログの映像とディジタル信号に変換するとき、離散的な位置における信号を取り出す操作と、有限分解能の範囲で数値に変換すること  
画素、ピクセル：2次元的な離散位置として、等間隔の格子状に配置した標本点  
解像度：標本点の多さの指標  
画素値(pixel value)：量子化された各画素の値。なんビットで量子化されたかによって段階数(階調数)が決まる。一般的には256段階の量子化レベルになる。  

* グレースケール画像  
CCDカメラなどで撮影された画像：RGBそれぞれ8ビット・256階調で表現され、16777216色（256×256×256）を表現することができる。  
医用画像：12ビット・4096階調で表現される。階調が高いと微妙な明るさの変化を表現する。  
濃度画像、グレースケール画像：単色で光の強さだけを表現したもの  

  * RGB成分をもつカラー画像をグレースケール画像に変換  
    YIQ表色系画像に変換する際のY成分の計算式を用いる。  
    ```math
    Y=0.299R+0.587G+0.114B  
    ```
2値化画像：最高濃度値と最低濃度値の２色で表現された画像  
